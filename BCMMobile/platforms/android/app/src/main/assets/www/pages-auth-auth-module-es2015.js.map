{"version":3,"sources":["./src/app/pages/auth/auth.page.html","./src/app/pages/auth/auth.module.ts","./src/app/pages/auth/auth.page.scss","./src/app/pages/auth/auth.page.ts"],"names":[],"mappings":"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","file":"pages-auth-auth-module-es2015.js","sourcesContent":["module.exports = \"<ion-content>\\r\\n  <ion-card>\\r\\n    <ion-card-header>\\r\\n      <ion-card-subtitle>Авторизация в приложении</ion-card-subtitle>\\r\\n      <ion-card-title>Твои визитки</ion-card-title>\\r\\n    </ion-card-header>\\r\\n\\r\\n    <ion-card-content>\\r\\n\\r\\n      <div *ngIf=\\\"!state\\\">\\r\\n        <ion-label position=\\\"stacked\\\">Имя <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n        </ion-label>\\r\\n        <ion-input required\\r\\n                   type=\\\"text\\\"\\r\\n                   (ionChange)=\\\"handleFirstNameValue($event)\\\"></ion-input>\\r\\n        <ion-label position=\\\"stacked\\\">Фамилия <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n        </ion-label>\\r\\n        <ion-input required\\r\\n                   type=\\\"text\\\"\\r\\n                   (ionChange)=\\\"handleLastNameValue($event)\\\"></ion-input>\\r\\n      </div>\\r\\n\\r\\n      <ion-label position=\\\"stacked\\\">Логин <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n      </ion-label>\\r\\n      <ion-input required\\r\\n                 type=\\\"text\\\"\\r\\n                 (ionChange)=\\\"handleLoginValue($event)\\\"></ion-input>\\r\\n      <ion-label position=\\\"stacked\\\">Пароль <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n      </ion-label>\\r\\n      <ion-input required\\r\\n                 type=\\\"text\\\"\\r\\n                 (ionChange)=\\\"handlePasswordValue($event)\\\"></ion-input>\\r\\n\\r\\n      <div class=\\\"stateToggle\\\">\\r\\n        <ion-checkbox [(ngModel)]=\\\"state\\\"\\r\\n                      name=\\\"blueberry\\\"\\r\\n                      checked></ion-checkbox>\\r\\n        <h4>Есть аккаунт?</h4>\\r\\n      </div>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n  <ion-button expand=\\\"block\\\"\\r\\n              type=\\\"submit\\\"\\r\\n              (click)=\\\"state ? login() : registration()\\\"\\r\\n              class=\\\"padding15\\\">Авторизоваться</ion-button>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {AuthPage} from './auth.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    RouterModule.forChild([{ path: '', component: AuthPage }])\r\n  ],\r\n  declarations: [AuthPage]\r\n})\r\nexport class AuthPageModule {}\r\n","module.exports = \".stateToggle {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-flow: row nowrap;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  text-align: center;\\n  margin-bottom: 15px;\\n}\\n\\n.stateToggle h4 {\\n  margin-left: 10px;\\n}\\n\\n.padding15 {\\n  padding: 0 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aC9EOlxccmVwb3NcXEJ1c2luZXNzQ2FyZE1hbmFnZXJcXEJDTU1vYmlsZS9zcmNcXGFwcFxccGFnZXNcXGF1dGhcXGF1dGgucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGgucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQUE7RUFBQSxhQUFBO0VBQ0EsOEJBQUE7RUFBQSw2QkFBQTtVQUFBLHFCQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7QUNDRjs7QURFQTtFQUNFLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGgucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnN0YXRlVG9nZ2xle1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1mbG93OiByb3cgbm93cmFwO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi5zdGF0ZVRvZ2dsZSBoNHtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG5cclxuLnBhZGRpbmcxNXtcclxuICBwYWRkaW5nOiAwIDE1cHg7XHJcbn0iLCIuc3RhdGVUb2dnbGUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcbn1cblxuLnN0YXRlVG9nZ2xlIGg0IHtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG5cbi5wYWRkaW5nMTUge1xuICBwYWRkaW5nOiAwIDE1cHg7XG59Il19 */\"","import {Component} from '@angular/core';\r\nimport {Router, convertToParamMap} from '@angular/router';\r\nimport {CrudService} from 'src/app/shared/services/crud.service';\r\nimport {AuthService} from 'src/app/shared/services/auth.service';\r\nimport {ToastController, AlertController} from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'auth',\r\n  templateUrl: 'auth.page.html',\r\n  styleUrls: ['auth.page.scss']\r\n})\r\nexport class AuthPage\r\n{\r\n\r\n  public state: any;\r\n  public authData: any = {};\r\n  constructor (\r\n    private crudService: CrudService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private toastController: ToastController,\r\n    private alertController: AlertController) {}\r\n\r\n  public handleFirstNameValue(event)\r\n  {\r\n    this.authData.firstName = event.target.value;\r\n  }\r\n  public handleLastNameValue(event)\r\n  {\r\n    this.authData.lastName = event.target.value;\r\n  }\r\n  public handleLoginValue(event)\r\n  {\r\n    this.authData.login = event.target.value;\r\n  }\r\n  public handlePasswordValue(event)\r\n  {\r\n    this.authData.password = event.target.value;\r\n  }\r\n\r\n  public registration()\r\n  {\r\n    this.crudService.post('profile', this.getParams())\r\n      .subscribe(data =>\r\n      {\r\n        this.login();\r\n      },\r\n        error =>\r\n        {\r\n          const err = 'Такой логин уже существует';\r\n          this.presentToast(err);\r\n        });\r\n  }\r\n\r\n  public login()\r\n  {\r\n    this.crudService.post('profile/token', this.getParams())\r\n      .subscribe(data =>\r\n      {\r\n        this.authService.setToken(data.token);\r\n        this.authService.setUserData(data.profileDto);\r\n\r\n        window.location.href = '';\r\n      },\r\n      error =>\r\n      {\r\n        this.presentAlert(error.message);\r\n        const err = 'Неверный логин или пароль';\r\n        this.presentToast(err);\r\n      });\r\n  }\r\n\r\n  private async presentToast(error: string)\r\n  {\r\n    const toast = await this.toastController.create({\r\n      message: error,\r\n      duration: 4000,\r\n      color: 'primary'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  private getParams(): Record<string, any>\r\n  {\r\n    return {\r\n      'Password': this.authData.password,\r\n      'ProfileDto': {\r\n        'FirstName': this.authData.firstName,\r\n        'LastName': this.authData.lastName,\r\n        'Login': this.authData.login\r\n      }\r\n    }\r\n  }\r\n\r\n  private async presentAlert(error) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Alert',\r\n      subHeader: 'Subtitle',\r\n      message: error,\r\n      buttons: ['OK']\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n"],"sourceRoot":""}